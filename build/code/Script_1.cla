connect light1 #NHW18U;
connect light2 #02BTI8;
connect light3 #GYBPZC;
connect tv #U2WZMG;
connect prox #96I2GC;

collection salotto is {tv,light2};
collection luci is {light1,light2,light3};

function turnoffall(lights) is
	i is 0;
	while i < size(lights) do
		lights[i].input is 0;
		increase i by 1;
	repeat;
end;

update is
	if prox.output = 1, 
		tv.output is 1;
		light2.input is 1;
	else turnoffall(luci); tv.output is 0;
	end;
repeat;
